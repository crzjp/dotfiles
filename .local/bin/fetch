#!/usr/bin/env sh

sy="GNU Guix SD"
pk="$(guix package -I | wc -l)"
pk="$pk (home: $(guix home describe -I | wc -l))"
wm="$(awk '/exec/{print $NF}' ~/.config/sx/sxrc)"
cl="[33;1m"
cr="[0m"

case "$INSIDE_EMACS" in
    *eshell*)
        sh="eshell"
        tm="emacs"
        ;;
    *vterm*)
        sh="${SHELL##*/}"
        tm="vterm"
        ;;
    *comint*)
        sh="${SHELL##*/}"
        tm="emacs"
        ;;
    *)
        sh="${SHELL##*/}"
        tm="${TERM%-*}"
        ;;
esac

cat <<EOF

        ${cl}OS ${cr}${sy}
  ${cl}PACKAGES ${cr}${pk}
     ${cl}SHELL ${cr}${sh}
  ${cl}TERMINAL ${cr}${tm}
        ${cl}WM ${cr}${wm}

EOF
